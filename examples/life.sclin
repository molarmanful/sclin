30=$n.
"Grid"@#.
"loop"@#

#Grid $n O>a 2^` ( 0 1, :r , ) map >M

#loop.
  ( show next )#.
  "Mrns"@# =$mrns.
  show next @

#next =$grid.
  $grid (( k v )=.) map
    $mrns $k.+ map $n %.
    ( $grid swap :` ) map +/.
    3 4, = ,_ $v && ||.
    $k swap

#Mrns 2O-a1- 2^` >A

#show dup.
  ."\u001b[H\u001b[J">o.
  0 $n *` ,, $n *` ( rot :/= ) fold.
  "Â·#"swap : ( w>< n>o ) tap pop